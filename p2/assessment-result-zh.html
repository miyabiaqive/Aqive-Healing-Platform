<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è©•ä¼°çµæœ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-50 min-h-screen pb-40 overflow-y-auto">
    
    <!-- Header -->
    <div class="bg-gradient-to-br from-purple-600 to-blue-600 p-6 pt-16 pb-12">
        <div class="text-center">
            <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-white/20 backdrop-blur flex items-center justify-center">
                <i id="result-icon" class="fas fa-heart text-4xl text-white"></i>
            </div>
            <h1 class="text-3xl font-bold text-white mb-2">è©•ä¼°å®Œæˆ</h1>
            <p class="text-white/80">æ„Ÿè¬ä½ èŠ±æ™‚é–“äº†è§£è‡ªå·±</p>
        </div>
    </div>

    <!-- Results Container -->
    <div class="px-6 -mt-6">
        <!-- Score Card -->
        <div class="bg-white rounded-3xl p-6 shadow-lg mb-6">
            <div class="text-center mb-6">
                <div class="text-sm text-gray-500 mb-2">ä½ çš„å£“åŠ›æŒ‡æ•¸</div>
                <div class="flex items-end justify-center gap-2 mb-2">
                    <span id="pss-score" class="text-5xl font-bold text-purple-600">0</span>
                    <span class="text-2xl text-gray-400 mb-1">/ 40</span>
                </div>
                <div id="stress-level" class="inline-block px-4 py-2 rounded-full bg-purple-100 text-purple-600 font-medium">
                    è©•ä¼°ä¸­...
                </div>
            </div>

            <!-- Score Breakdown -->
            <div class="space-y-3 pt-4 border-t border-gray-100">
                <div class="flex items-center justify-between">
                    <span class="text-gray-600">å£“åŠ›æ„ŸçŸ¥</span>
                    <div class="flex items-center gap-2">
                        <div class="w-24 h-2 bg-gray-100 rounded-full overflow-hidden">
                            <div id="pss-bar" class="h-full bg-purple-500 transition-all duration-500" style="width: 0%"></div>
                        </div>
                        <span id="pss-value" class="text-sm font-medium text-gray-900">0</span>
                    </div>
                </div>
                <div class="flex items-center justify-between">
                    <span class="text-gray-600">èº«é«”è¨Šè™Ÿ</span>
                    <div class="flex items-center gap-2">
                        <div class="w-24 h-2 bg-gray-100 rounded-full overflow-hidden">
                            <div id="body-bar" class="h-full bg-blue-500 transition-all duration-500" style="width: 0%"></div>
                        </div>
                        <span id="body-value" class="text-sm font-medium text-gray-900">0</span>
                    </div>
                </div>
                <div class="flex items-center justify-between">
                    <span class="text-gray-600">å¿ƒæ™ºç‹€æ…‹</span>
                    <div class="flex items-center gap-2">
                        <div class="w-24 h-2 bg-gray-100 rounded-full overflow-hidden">
                            <div id="mental-bar" class="h-full bg-indigo-500 transition-all duration-500" style="width: 0%"></div>
                        </div>
                        <span id="mental-value" class="text-sm font-medium text-gray-900">0</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analysis -->
        <div class="bg-white rounded-3xl p-6 mb-6">
            <h2 class="text-xl font-bold text-gray-900 mb-4">
                <i class="fas fa-lightbulb text-yellow-500 mr-2"></i>
                ä½ çš„ç‹€æ…‹åˆ†æ
            </h2>
            <div id="analysis-text" class="text-gray-700 leading-relaxed space-y-3">
                <!-- Analysis will be inserted here -->
            </div>
        </div>

        <!-- Recommendations -->
        <div class="mb-6">
            <h2 class="text-xl font-bold text-gray-900 mb-4 px-2">
                <i class="fas fa-star text-purple-500 mr-2"></i>
                ç‚ºä½ æ¨è–¦
            </h2>
            <div id="recommendations" class="space-y-3">
                <!-- Recommendations will be inserted here -->
            </div>
        </div>

        <!-- Brand Message -->
        <div class="bg-gradient-to-br from-purple-600 to-blue-600 rounded-3xl p-6 text-center mb-6">
            <i class="fas fa-spa text-3xl text-white mb-3"></i>
            <h3 class="text-xl font-semibold text-white mb-2">æ‰¾å›å…§åœ¨èƒ½é‡ï¼Œæ´»å‡ºçœŸæˆ‘</h3>
            <p class="text-white/80 text-sm leading-relaxed">
                åœ¨ Aqiveï¼Œæˆ‘å€‘ç›¸ä¿¡æ¯å€‹äººéƒ½æ“æœ‰è‡ªæˆ‘ç™‚ç™’çš„åŠ›é‡ã€‚è®“æˆ‘å€‘é™ªä¼´ä½ ï¼Œä¸€èµ·è¸ä¸Šé€™æ®µèƒ½é‡å›ç©©çš„æ—…ç¨‹ã€‚
            </p>
        </div>

        <!-- CTA Button -->
        <button onclick="startJourney()" class="w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-full py-4 font-semibold text-lg shadow-lg mb-4">
            é–‹å§‹æˆ‘çš„ç™‚ç™’ä¹‹æ—…
            <i class="fas fa-arrow-right ml-2"></i>
        </button>

        <!-- Save Results -->
        <button onclick="saveToProfile()" class="w-full bg-white border-2 border-gray-200 text-gray-700 rounded-full py-3 font-medium">
            <i class="fas fa-save mr-2"></i>
            å„²å­˜çµæœåˆ°å€‹äººæª”æ¡ˆ
        </button>
    </div>

    <script>
        const results = JSON.parse(localStorage.getItem('aqive_assessment_results') || '{}');
        
        const stressLevels = {
            low: {
                range: [0, 13],
                label: 'å£“åŠ›å¯æ§å‹',
                color: 'bg-green-100 text-green-600',
                icon: 'fa-smile',
                analysis: `
                    <p>å¤ªå¥½äº†ï¼ä½ ç›®å‰çš„å£“åŠ›æ°´å¹³è™•æ–¼å¯æ§ç¯„åœå…§ã€‚é€™è¡¨ç¤ºä½ èƒ½å¤ æœ‰æ•ˆåœ°ç®¡ç†æ—¥å¸¸ç”Ÿæ´»ä¸­çš„å£“åŠ›ï¼Œä¸¦ä¸”å°è‡ªå·±æ‡‰å°æŒ‘æˆ°çš„èƒ½åŠ›æœ‰ä¿¡å¿ƒã€‚</p>
                    <p class="mt-3">é›–ç„¶å£“åŠ›æ°´å¹³è¼ƒä½ï¼Œä½†æŒçºŒçš„è‡ªæˆ‘ç…§é¡§ä»ç„¶å¾ˆé‡è¦ã€‚å»ºè­°ä½ å»ºç«‹æ—¥å¸¸çš„èƒ½é‡ç®¡ç†ç¿’æ…£ï¼Œé é˜²æ€§åœ°ç¶­æŒèº«å¿ƒå¹³è¡¡ã€‚</p>
                `,
                recommendations: [
                    { title: 'æ¯æ—¥å¹³éœå†¥æƒ³', duration: '10 åˆ†é˜', type: 'å†¥æƒ³', category: 'player-zh.html', icon: 'ğŸ§˜â€â™€ï¸' },
                    { title: 'æ™¨é–“èƒ½é‡å–šé†’', duration: '5 åˆ†é˜', type: 'å‘¼å¸ç·´ç¿’', category: 'breath-zh.html', icon: 'â˜€ï¸' },
                    { title: 'èƒ½é‡ç®¡ç†åŸºç¤èª²ç¨‹', duration: '15 åˆ†é˜', type: 'èª²ç¨‹', category: 'course-detail-zh.html', icon: 'ğŸ“š' }
                ]
            },
            moderate: {
                range: [14, 26],
                label: 'å£“åŠ›ä¸­ç­‰åé«˜',
                color: 'bg-yellow-100 text-yellow-700',
                icon: 'fa-meh',
                analysis: `
                    <p>ä½ ç›®å‰æ­£ç¶“æ­·ä¸­ç­‰åˆ°åé«˜ç¨‹åº¦çš„å£“åŠ›ã€‚é€™å€‹éšæ®µå¾ˆå¸¸è¦‹ï¼Œå°¤å…¶æ˜¯åœ¨é¢å°å·¥ä½œã€ç”Ÿæ´»å¤šé‡æŒ‘æˆ°æ™‚ã€‚é‡è¦çš„æ˜¯ï¼Œä½ å·²ç¶“æ„è­˜åˆ°é€™å€‹ç‹€æ³ï¼Œä¸¦ä¸”é¡˜æ„æ¡å–è¡Œå‹•ã€‚</p>
                    <p class="mt-3">ç¾åœ¨æ˜¯å»ºç«‹æ”¾é¬†ç¿’æ…£çš„æœ€ä½³æ™‚æ©Ÿã€‚é€éè¦å¾‹çš„å‘¼å¸ç·´ç¿’ã€èº«é«”è¦ºå¯Ÿå’Œæ”¾é¬†æŠ€å·§ï¼Œä½ å¯ä»¥æœ‰æ•ˆåœ°é™ä½å£“åŠ›æ„Ÿå—ï¼Œé‡æ–°æ‰¾å›å…§åœ¨çš„å¹³è¡¡ã€‚</p>
                `,
                recommendations: [
                    { title: 'æ·±åº¦å‘¼å¸å¼•å°', duration: '15 åˆ†é˜', type: 'å‘¼å¸ç·´ç¿’', category: 'breath-zh.html', icon: 'ğŸŒ¬ï¸' },
                    { title: 'èº«é«”æƒææ”¾é¬†', duration: '20 åˆ†é˜', type: 'å†¥æƒ³', category: 'player-zh.html', icon: 'ğŸ§˜' },
                    { title: 'å£“åŠ›ç®¡ç†å·¥ä½œåŠ', duration: '30 åˆ†é˜', type: 'èª²ç¨‹', category: 'course-detail-zh.html', icon: 'ğŸ¯' },
                    { title: 'å£“åŠ›ç®¡ç†å°è©±', duration: 'éš¨æ™‚', type: 'åŠ©æ‰‹æ”¯æ´', category: 'ai-chat-zh.html', icon: 'ğŸ’¬' }
                ]
            },
            high: {
                range: [27, 40],
                label: 'èƒ½é‡è€—ç«­å‹',
                color: 'bg-red-100 text-red-600',
                icon: 'fa-tired',
                analysis: `
                    <p>ä½ çš„è©•ä¼°çµæœé¡¯ç¤ºï¼Œä½ æ­£ç¶“æ­·è¼ƒé«˜ç¨‹åº¦çš„å£“åŠ›ï¼Œèº«é«”å’Œå¿ƒæ™ºéƒ½ç™¼å‡ºäº†éœ€è¦æ·±åº¦ä¼‘æ¯çš„è¨Šè™Ÿã€‚é€™ä¸æ˜¯ä½ çš„éŒ¯ï¼Œè€Œæ˜¯é•·æœŸé«˜å£“ç’°å¢ƒä¸‹çš„è‡ªç„¶åæ‡‰ã€‚</p>
                    <p class="mt-3">ç¾åœ¨æœ€é‡è¦çš„æ˜¯çµ¦è‡ªå·±å……åˆ†çš„ä¼‘æ¯å’Œæ¢å¾©æ™‚é–“ã€‚æˆ‘å€‘å¼·çƒˆå»ºè­°ä½ å„ªå…ˆé€²è¡Œæ·±åº¦æ”¾é¬†ç·´ç¿’ï¼Œå¿…è¦æ™‚ä¹Ÿå¯å°‹æ±‚å°ˆæ¥­å”åŠ©ã€‚è¨˜ä½ï¼Œç…§é¡§å¥½è‡ªå·±ä¸æ˜¯è‡ªç§ï¼Œè€Œæ˜¯å°è‡ªå·±å’Œèº«é‚Šäººè² è²¬çš„è¡¨ç¾ã€‚</p>
                    <p class="mt-3 text-sm text-gray-600">ğŸ’¡ å»ºè­°ï¼šå¦‚æœæŒçºŒæ„Ÿåˆ°åš´é‡ç„¦æ…®æˆ–èº«é«”ä¸é©ï¼Œè«‹è€ƒæ…®è«®è©¢å°ˆæ¥­é†«ç™‚æˆ–å¿ƒç†å¥åº·å°ˆå®¶ã€‚</p>
                `,
                recommendations: [
                    { title: 'å€¦æ€ ä¿®å¾©ç™‚ç¨‹', duration: '30 åˆ†é˜', type: 'æ·±åº¦æ¢å¾©', category: 'course-detail-zh.html', icon: 'ğŸŒ±' },
                    { title: 'ç¡çœ ä¿®å¾©å¼•å°', duration: '45 åˆ†é˜', type: 'ç¡çœ ', category: 'player-zh.html', icon: 'ğŸ˜´' },
                    { title: 'é‚Šç•Œè¨­å®šå·¥ä½œåŠ', duration: '25 åˆ†é˜', type: 'èª²ç¨‹', category: 'course-detail-zh.html', icon: 'ğŸ›¡ï¸' },
                    { title: 'ç·Šæ€¥æ”¾é¬†ç·´ç¿’', duration: '10 åˆ†é˜', type: 'å‘¼å¸', category: 'breath-zh.html', icon: 'ğŸ†˜' },
                    { title: 'æƒ…ç·’æ”¯æ´å°è©±', duration: 'éš¨æ™‚', type: 'åŠ©æ‰‹é™ªä¼´', category: 'ai-chat-zh.html', icon: 'ğŸ’™' }
                ]
            }
        };

        function getStressLevel(score) {
            if (score <= 13) return 'low';
            if (score <= 26) return 'moderate';
            return 'high';
        }

        function displayResults() {
            const { pssScore, bodySignalScore, mentalSignalScore } = results;
            const level = getStressLevel(pssScore);
            const levelInfo = stressLevels[level];

            // Display main score with animation
            animateValue('pss-score', 0, pssScore, 1500);
            
            // Display level badge
            document.getElementById('stress-level').textContent = levelInfo.label;
            document.getElementById('stress-level').className = `inline-block px-4 py-2 rounded-full font-medium ${levelInfo.color}`;
            
            // Update icon
            document.getElementById('result-icon').className = `fas ${levelInfo.icon} text-4xl text-white`;

            // Display breakdowns
            setTimeout(() => {
                document.getElementById('pss-value').textContent = pssScore;
                document.getElementById('pss-bar').style.width = (pssScore / 40 * 100) + '%';
                
                document.getElementById('body-value').textContent = bodySignalScore;
                document.getElementById('body-bar').style.width = (bodySignalScore / 8 * 100) + '%';
                
                document.getElementById('mental-value').textContent = mentalSignalScore;
                document.getElementById('mental-bar').style.width = (mentalSignalScore / 4 * 100) + '%';
            }, 500);

            // Display analysis
            document.getElementById('analysis-text').innerHTML = levelInfo.analysis;

            // Display recommendations
            const recsContainer = document.getElementById('recommendations');
            recsContainer.innerHTML = levelInfo.recommendations.map(rec => `
                <div onclick="navigate('${rec.category}')" class="bg-white rounded-2xl p-4 flex items-center gap-4 shadow-sm hover:shadow-md transition-all cursor-pointer">
                    <div class="text-4xl">${rec.icon}</div>
                    <div class="flex-1">
                        <h3 class="font-semibold text-gray-900">${rec.title}</h3>
                        <p class="text-sm text-gray-600">${rec.type} â€¢ ${rec.duration}</p>
                    </div>
                    <i class="fas fa-chevron-right text-gray-400"></i>
                </div>
            `).join('');
        }

        function animateValue(id, start, end, duration) {
            const element = document.getElementById(id);
            const range = end - start;
            const increment = range / (duration / 16);
            let current = start;
            
            const timer = setInterval(() => {
                current += increment;
                if ((increment > 0 && current >= end) || (increment < 0 && current <= end)) {
                    current = end;
                    clearInterval(timer);
                }
                element.textContent = Math.round(current);
            }, 16);
        }

        function startJourney() {
            navigate('home-zh.html');
        }

        function saveToProfile() {
            // Mark results as saved
            localStorage.setItem('aqive_results_saved', 'true');
            
            // Show confirmation
            const btn = event.target;
            btn.innerHTML = '<i class="fas fa-check mr-2"></i>å·²å„²å­˜';
            btn.classList.add('bg-green-50', 'text-green-600', 'border-green-200');
            
            setTimeout(() => {
                btn.innerHTML = '<i class="fas fa-save mr-2"></i>å„²å­˜çµæœåˆ°å€‹äººæª”æ¡ˆ';
                btn.classList.remove('bg-green-50', 'text-green-600', 'border-green-200');
            }, 2000);
        }

        function navigate(page) {
            if (window.parent !== window) {
                parent.postMessage({ action: 'navigate', page: page }, '*');
            } else {
                window.location.href = page;
            }
        }

        // Display results on load
        if (results.pssScore !== undefined) {
            displayResults();
        } else {
            // No results found, redirect to assessment
            alert('æ‰¾ä¸åˆ°è©•ä¼°çµæœï¼Œè«‹é‡æ–°é€²è¡Œè©•ä¼°ã€‚');
            navigate('pss-assessment-zh.html');
        }
    </script>
</body>
</html>

